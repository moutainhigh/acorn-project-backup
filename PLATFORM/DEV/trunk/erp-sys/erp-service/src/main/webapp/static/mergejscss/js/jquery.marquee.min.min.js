/*!
 * Marquee jQuery Plug-in
 *
 * Copyright 2009 Giva, Inc. (http://www.givainc.com/labs/) 
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * 	http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Date: 2009-05-20
 * Rev:  1.0.01
 */
(function(b){b.marquee={version:"1.0.01"};b.fn.marquee=function(h){var g=typeof arguments[0]=="string"&&arguments[0];var i=g&&Array.prototype.slice.call(arguments,1)||arguments;var j=(this.length==0)?null:b.data(this[0],"marquee");if(j&&g&&this.length){if(g.toLowerCase()=="object"){return j}else{if(j[g]){var a;this.each(function(d){var c=b.data(this,"marquee")[g].apply(j,i);if(d==0&&c){if(!!c.jquery){a=b([]).add(c)}else{a=c;return false}}else{if(!!c&&!!c.jquery){a=a.add(c)}}});return a||this}else{return this}}}else{return this.each(function(){new b.Marquee(this,h)})}};b.Marquee=function(C,a){a=b.extend({},b.Marquee.defaults,a);var s=this,u=b(C),B=u.find("> li"),z=-1,A=false,v=false,t=0;b.data(u[0],"marquee",s);this.pause=function(){A=true;r()};this.resume=function(){A=false;D()};this.update=function(){var c=B.length;B=u.find("> li");if(c<=1){D()}};function w(e){if(B.filter("."+a.cssShowing).length>0){return false}var c=B.eq(e);if(b.isFunction(a.beforeshow)){a.beforeshow.apply(s,[u,c])}var d={top:(a.yScroll=="top"?"-":"+")+c.outerHeight()+"px",left:0};u.data("marquee.showing",true);c.addClass(a.cssShowing);c.css(d).animate({top:"0px"},a.showSpeed,a.fxEasingShow,function(){if(b.isFunction(a.show)){a.show.apply(s,[u,c])}u.data("marquee.showing",false);x(c)})}function x(c,d){if(v==true){return false}d=d||a.pauseSpeed;if(E(c)){setTimeout(function(){if(v==true){return false}var e=c.outerWidth(),g=e*-1,f=parseInt(c.css("left"),10);c.animate({left:g+"px"},((e+f)*a.scrollSpeed),a.fxEasingScroll,function(){y(c)})},d)}else{if(B.length>1){setTimeout(function(){if(v==true){return false}c.animate({top:(a.yScroll=="top"?"+":"-")+u.innerHeight()+"px"},a.showSpeed,a.fxEasingScroll);y(c)},d)}}}function y(c){if(b.isFunction(a.aftershow)){a.aftershow.apply(s,[u,c])}c.removeClass(a.cssShowing);F()}function r(){v=true;if(u.data("marquee.showing")!=true){B.filter("."+a.cssShowing).dequeue().stop()}}function D(){v=false;if(u.data("marquee.showing")!=true){x(B.filter("."+a.cssShowing),1)}}if(a.pauseOnHover){u.hover(function(){if(A){return false}r()},function(){if(A){return false}D()})}function E(c){return(c.outerWidth()>u.innerWidth())}function F(){z++;if(z>=B.length){if(!isNaN(a.loop)&&a.loop>0&&(++t>=a.loop)){return false}z=0}w(z)}if(b.isFunction(a.init)){a.init.apply(s,[u,a])}F()};b.Marquee.defaults={yScroll:"top",showSpeed:850,scrollSpeed:12,pauseSpeed:5000,pauseOnHover:true,loop:-1,fxEasingShow:"swing",fxEasingScroll:"linear",cssShowing:"marquee-showing",init:null,beforeshow:null,show:null,aftershow:null}})(jQuery);