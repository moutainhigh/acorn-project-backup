function AcornPhone(b,a,c,d){this.ani=b;this.dnsi=a;this.tollFreeNum=c;this.isOutBoound=d;this.boundType=0;this.status=0;this.company="";this.province="";this.instId="";this.seconds="";this.customerType="";this.customerId="";this.currentLeadId="";this.cticonnid="";this.connStates="";this.task=new Array();this.ctisdt="";this.ctiedt="";this.leavingReason="";this.insure="";this._expir=300;this.campainId="";this.acdId="";this.onOffHook=null;this.onReady=null;this.onReadyOut=null;this.onLeaving=null;this.onRinging=null;this.onTalking=null;this.onDialing=null;this.onTalkingOut=null;this.onProcessing=null;this.onTransfering=null;this.onMeeting=null;this.onLogout=null;this.onTriTalking=null;this.onHolding=null;this.onOutringing=null;this.onOutcall=null;this.offline=null;this.ReadyOut=null}AcornPhone.prototype.statusTable=[[2,3,5,10],[0,2,5],[0,5,10],[4],[7],[6,7],[7],[0,1,2],[-1,2],[],[],[],[]];AcornPhone.prototype.statusNams=["摘机","就绪","就绪-可外呼","离席","振铃","通话中","呼出中","呼出通话","后处理","转接中","会议","注销","三方通话","保持"];AcornPhone.prototype.getValidStatus=function getValidStatus(){return(this.statusTable[this.status])};AcornPhone.prototype.getStatusName=function(a){if(a==null||a==undefined){return(this.statusNams[this.status])}else{if(a>=-1&&a<=15){return(this.statusNams[a])}else{return null}}};AcornPhone.prototype.init=function(){if(this.offline!=null){this.status=15;this.offline(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound)}};AcornPhone.prototype.onStatusChange=function(){if(this.ani){var a=this.ani.substr(0,this.ani.length-4)+"****"}switch(this.status){case -1:if(this.onOffHook!=null){this.onOffHook(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound,this.company,this.province)}break;case 0:if(this.onReady!=null){if(checkSoftPhoneApplet()){if($("#ctiPhoneType").val()==1){if(!getDnStatus(null)){console.info("========"+getDnStatus(null));changeCtiOnAndOff_off();msgSlide("电话没有挂机，请挂机！！");return;break}else{this.onReady(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound,this.company,this.province)}}else{this.onReady(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound,this.company,this.province)}}else{this.onReady(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound,this.company,this.province)}}break;case 1:if(this.onReadyOut!=null){this.onReadyOut(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound,this.company,this.province)}break;case 2:if(this.onLeaving!=null){this.onLeaving(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound,this.company,this.province)}break;case 3:if(this.onRinging!=null){this.onRinging(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound,this.company,this.province)}break;case 4:if(this.onTalking!=null){this.onTalking(a,this.dnsi,this.tollFreeNum,this.isOutBoound,this.company,this.province)}break;case 5:if(this.onDialing!=null){this.onDialing(a,this.dnsi,this.tollFreeNum,this.isOutBoound,this.company,this.province)}break;case 6:if(this.onTalkingOut!=null){this.onTalkingOut(a,this.dnsi,this.tollFreeNum,this.isOutBoound,this.company,this.province)}break;case 7:if(this.onProcessing!=null){this.onProcessing(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound,this.company,this.province)}break;case 8:if(this.onTransfering!=null){this.onTransfering(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound)}break;case 9:if(this.onMeeting!=null){this.onMeeting(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound)}break;case 10:if(this.onLogout!=null){this.onLogout(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound)}break;case 11:if(this.onTriTalking!=null){this.onTriTalking(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound)}break;case 12:if(this.onHolding!=null){this.onHolding(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound,this.company,this.province)}break;case 13:if(this.onOutringing!=null){this.onOutringing(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound,this.company,this.province)}break;case 14:if(this.onOutcall!=null){this.onOutcall(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound,this.company,this.province)}break;case 15:if(this.offline!=null){this.offline(this.ani,this.dnsi,this.tollFreeNum,this.isOutBoound,this.company,this.province)}break;default:}};AcornPhone.prototype.changeStatus=function(c,b,a,e,g){var f=true;if(c>=-1&&c<=15){var d=this.getValidStatus();this.status=c;if(b!=null){this.ani=b}if(a!=null){this.dnsi=b}if(g!=null){this.isOutBoound=g}if(e!=null){this.tollFreeNum=e}this.onStatusChange()}else{f=false}if(f==false){throw new Error("invalid status change from "+this.status+" to "+c)}};AcornPhone.prototype.setCurrentLeadId=function(a){this.currentLeadId=a};AcornPhone.prototype.getCurrentLeadId=function(a){return this.currentLeadId};AcornPhone.prototype.clearCurrentLeadId=function(){this.currentLeadId="";this.task=new Array()};AcornPhone.prototype.addTask=function(a){return this.task.push(a)};AcornPhone.prototype.deleteTask=function(b){var a="";for(i=0;i<this.task.length;i++){if(this.task[i]==b){a=arrayObj.splice(i,1)}}return a};AcornPhone.prototype.clean=function(){this.ani=null;this.dnsi=null;this.tollFreeNum=null;this.isOutBoound=null;this.status=0;this.customerType="";this.customerId="";this.company="";this.province="";this.instId="";this.boundType=0;this.seconds="";this.currentLeadId="";this.cticonnid="";this.task=new Array();this.connStates="";this.ctisdt="";this.ctiedt="";this.insure="";this.campainId="";this.acdId=""};